<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 静的ファイルはFlaskのstaticディレクトリに配置 -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <title>タスク管理アプリ</title>
</head>
<body>
  <h1>タスク管理</h1>
  <form id="task-form">
    <input type="text" class="input" id="title" placeholder="タスクタイトル" required>
    <textarea id="details" class="input" placeholder="タスク詳細"></textarea>
    <input type="date" id="due_date" class="input">
    <input type="text" id="labels" class="input" placeholder="ラベル（カンマ区切り）">
    <button type="submit">タスクを追加</button>
  </form>
  <!-- タスク一覧（バックログ形式） -->
  <ul class="todos" id="task-list">
    {% for task in tasks %}
    <li class="task {% if task.completed %}completed{% endif %}" draggable="true" data-id="{{ task.id }}">
      <strong>{{ task.title }}</strong><br>
      詳細: {{ task.details }}<br>
      期限: {{ task.due_date }}<br>
      ラベル: {{ task.labels|join(', ') }}<br>
      状態: {{ '済み' if task.completed else '未完了' }}<br>
      <button onclick="completeTask({{ task.id }})">完了にする</button>
    </li>
    {% endfor %}
  </ul>
  <small>ドラッグして順序変更。タスク完了はボタンで操作。</small>
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>